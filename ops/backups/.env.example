# --- Restic ---
export BACKUPS_DIR="/path/to/backups"                   # base mount for local backup storage
export RESTIC_REPOSITORY="${BACKUPS_DIR}/homelab-restic" # or s3:..., b2:..., rclone:...
export RESTIC_PASSWORD="CHANGE_ME"
# Retention policy
export RESTIC_KEEP_DAILY=7
export RESTIC_KEEP_WEEKLY=4
export RESTIC_KEEP_MONTHLY=6
# Grouping for retention (optional; e.g. "host" or "host,tags")
# export RESTIC_GROUP_BY="host"
# Apply retention after each backup? (1=yes, 0=no)
export RUN_FORGET=1

# Exclusions
# Prefer this var name (singular). The script also accepts EXCLUDE_FILE and legacy RESTIC_EXCLUDES_FILE.
export RESTIC_EXCLUDE_FILE="/opt/homelab-stacks/ops/backups/exclude.txt"

# Uptime Kuma (Push monitor)
export KUMA_PUSH_URL="https://uptime-kuma.<YOUR_DOMAIN>/api/push/<YOUR_TOKEN>"
# Optional DNS override for Kuma push (force LAN IP when hairpin NAT/DNS breaks)
# export KUMA_RESOLVE_IP="<KUMA_LAN_IP>"

# What to back up (paths may be absent; the script will skip them cleanly)
# NOTE: do NOT put the Nextcloud data volume here; use the dedicated nc-backup.sh flow.
BACKUP_PATHS=(
  # Public infra (scripts, ops, etc.)
  "/opt/homelab-stacks/ops"

  # CouchDB (bind)
  "/opt/homelab-runtime/stacks/couchdb/data"

  # Nextcloud backup artifacts (sql+tar+.sha256), not the data volume
  "${BACKUPS_DIR}/nextcloud"

  # Uptime Kuma data (bind)
  "/opt/homelab-runtime/stacks/uptime-kuma/data"
)
